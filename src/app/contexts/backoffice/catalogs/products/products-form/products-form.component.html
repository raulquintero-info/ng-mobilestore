
<div class="container mt-3 mb-5">

  <div class="row ms-4 mt-3 mb-4">

    <h3>Productos </h3>
    <hr>
  </div>


  <div *ngIf="showError" class="alert alert-warning ms-4 mt-3">{{ errorMessage }}</div>

  <div id="formProduct" *ngIf="showForm">
    <div class="row mt-3 ms-3">
      <div class="col-md-6">
        <h3>Caracteristicas</h3>
        <div class="mb-3">
          <label for="formId" class="form-label">Id</label>
          <input class="form-control" type="text" [(ngModel)]="product.id" disabled id="formId">
        </div>

        <div class="mb-3">
          <label for="formName" class="form-label">Nombre</label>
          <input class="form-control" [(ngModel)]="product.name" type="text" id="formName">
        </div>
        <div class="mb-3">
          <label for="formDescription" class="form-label">Caracteristicas</label>
          <textarea class="form-control" [(ngModel)]="product.description" id="formDescription" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="formImage" class="form-label">Ruta de la Imagen <span style="font-size:smaller">( https://www.freeiconspng.com/uploads/no-image-icon-15.png )</span></label>
          <input type="email" class="form-control" [(ngModel)]="product.image" id="formImage" placeholder="url">
        </div>
        <div class="mb-3">
            <label for="formQuantity" class="form-label">Inventario</label>
            <input class="form-control" type="number" [(ngModel)]="product.quantity" id="formQuantity">
          </div>


      </div>
      <div class="col-md-3 ">
        <h3>Imagen del producto</h3>
        <div class="col-md-12 pe-3" astyle="width: 100%;height:300px; border:1px rgb(139, 138, 138) solid">
          <div class="mb-3">
            <img *ngIf="product.image" [src]="product.image" height="300" alt="" class="img-thumbnail rounded mx-autio d-block">
          </div>


          <div class="mb-3">
            <label for="formPrice" class="form-label">Precio</label>
            <input class="form-control" type="number" [(ngModel)]="product.price" id="formPrice">
          </div>
          <div class="mb-3">
            <label class="form-check-label" for="flexSwitchCheckChecked">Habilitar Oferta?</label>
            <input class="form-check-input form-check form-switch" readonly type="checkbox" [(ngModel)]="product.isOffer" role="switch" id="flexSwitchCheckChecked" [checked]="product.isOffer">
          </div>
          <div class="mb-3">
            <label for="formPrice" class="form-label">Precio de  Oferta</label>
            <input class="form-control" type="number" [(ngModel)]="product.offerPrice" id="formPrice">
          </div>


        </div>
      </div>
      <div class="col-md-3  ">
        <div class="mt-3">
          <label for="formBrand" class="form-label">Marcas</label>
          <select class="form-select" [(ngModel)]="product.brand!.id" id="formBrand">
            <option value="0" selected>Seleccione una Marca</option>
            <option *ngFor="let b of brands" value="{{ b.id }}">{{ b.brandname }}</option>
          </select>
        </div>
        <div class="mt-3">
          <label for="formCategory" class="form-label">Categoria</label>
          <select class="form-select" [(ngModel)]="product.category!.id" id="formCategory">
            <option value="0" selected>Seleccione una Categoria</option>
            <!-- <option *ngFor="let c of categories" [value]="c"></option> -->
            <option *ngFor="let c of categories" value="{{ c.id }}">{{c.name}}</option>
          </select>

        </div>
        <div class="pt-3">
          <button type="button" class="btn btn-success mt-3 mb-4" [disabled]="wasSaved" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi bi-floppy"></i> {{txtBtnSaveOrUpdate}} Producto</button>
          <hr>
          <button type="button" class="btn btn-sm btn-link mt-2" [routerLink]="['/admin/productos']" ><i class="bi bi-list-task"></i> Ver los Productos</button><br>
          <button type="button" class="btn btn-sm btn-link " routerLink="/admin/productos/altas" > <i class="bi bi-plus-circle"></i> Agregar Producto</button>
        </div>

      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Aviso</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Esta Seguro que desea Grabar este Producto?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary " (click)="saveProduct()" data-bs-dismiss="modal">Grabar</button>

      </div>
    </div>
  </div>
</div>
